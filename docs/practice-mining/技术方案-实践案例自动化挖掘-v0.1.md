# 技术方案：实践案例自动化挖掘 v0.1

> 作者：张一鸣  
> 日期：2026-02-14  
> 状态：初稿

---

## 1. 背景与目标

### 1.1 问题定义

skill-cn 的核心资产是"实践案例"——Skill 怎么用、用在什么场景、踩过什么坑。

当前痛点：**实践案例的挖掘搬运成本太高**，全靠骁哥人肉从全网找。

- 内容源存在（全网有大量优秀实践）
- 但发现、筛选、整理耗时巨大
- 这是内容飞轮转不起来的根本原因

### 1.2 目标

设计一套**半自动化挖掘系统**，把骁哥的时间从"挖掘"解放到"审核"：

- AI 自动挖掘 + 推荐候选
- 人工一键确认 → 入库
- 预期效率提升：10x

### 1.3 成功指标

| 指标 | 当前 | 目标 |
|------|------|------|
| 每周新增实践案例 | ~5 篇（人肉） | 20+ 篇 |
| 骁哥每篇耗时 | 15-30 分钟 | < 2 分钟（审核） |
| 内容质量 | 高（人工筛选） | 保持高质量 |

---

## 2. 现状分析

### 2.1 现有数据结构

```typescript
type Practice = {
  id: number;
  title: string;           // 标题
  summary: string;         // 摘要
  channel: string;         // 来源渠道（公众号/小红书/csdn...）
  source_url: string;      // 原文链接
  author_name: string;     // 作者
  skill_ids: number[];     // 关联 Skill ID
  primary_skill_id: number;// 主 Skill
  is_listed: boolean;      // 是否上架
  is_featured: boolean;    // 是否精选
  click_count: number;     // 点击数
};
```

### 2.2 现有内容源分布

| 渠道 | 数量 | 占比 |
|------|------|------|
| 公众号 | 113 | 98% |
| 小红书 | 1 | <1% |
| CSDN | 1 | <1% |

**结论**：微信公众号是核心内容源，优先做透。

---

## 3. 方案设计

### 3.1 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                     内容挖掘 Pipeline                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌────────┐│
│  │ 内容源   │ -> │ 抓取器   │ -> │ AI 筛选  │ -> │ 候选池 ││
│  │ (公众号) │    │ (定时)   │    │ + 评分   │    │        ││
│  └──────────┘    └──────────┘    └──────────┘    └────────┘│
│                                                      │      │
│                                                      v      │
│  ┌──────────┐    ┌──────────┐    ┌──────────────────────┐  │
│  │ Supabase │ <- │ 入库     │ <- │ Telegram Bot 审核    │  │
│  │ practices│    │          │    │ (骁哥一键确认/拒绝)  │  │
│  └──────────┘    └──────────┘    └──────────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 核心模块

#### 3.2.1 内容源监控

**Phase 1：微信公众号**（优先级最高）

挑战：微信公众号没有公开 API，需要间接方式获取。

方案选项：

| 方案 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| A. 搜狗微信搜索 | 免费、覆盖广 | 反爬严格、不稳定 | ⭐⭐ |
| B. 第三方聚合平台 | 稳定、有 API | 付费、覆盖有限 | ⭐⭐⭐ |
| C. RSS 订阅服务 | 稳定、实时 | 需配置、覆盖有限 | ⭐⭐⭐⭐ |
| D. 人工提交入口 | 零成本、高质量 | 依赖用户、量小 | ⭐⭐⭐ |

**推荐组合**：C + D
- 核心作者用 RSS 订阅（WeRSS / 今日热榜等服务）
- 开放用户提交入口，降低骁哥工作量

**Phase 2：扩展源**（后续迭代）
- 掘金、V2EX、即刻
- Twitter/X（英文优质内容）
- GitHub Discussions

#### 3.2.2 AI 筛选 + 评分

**筛选标准（"好案例"定义）**：

1. **相关性**：必须与 AI Skill/Agent/Prompt 相关
2. **实操性**：有具体操作步骤或代码，不是纯概念
3. **完整性**：有场景、有方法、有结果
4. **时效性**：优先近期内容（1 个月内）

**AI 评分 Prompt**：

```
你是一个 AI 实践案例筛选专家。请评估以下文章是否适合收录到 skill-cn（AI Skill 实践平台）。

评分维度（1-5 分）：
1. 相关性：是否与 AI Skill/Agent/Prompt 工程相关
2. 实操性：是否有具体操作步骤或代码示例
3. 完整性：是否有清晰的场景、方法、结果
4. 质量：内容深度和专业度

文章标题：{title}
文章摘要：{summary}
文章正文（前 2000 字）：{content}

请输出：
- 总分（1-10）
- 是否推荐收录（是/否）
- 推荐理由（一句话）
- 建议关联的 Skill 类型（如有）
```

**阈值**：总分 >= 7 进入候选池

#### 3.2.3 候选池 + 审核流程

**候选池表结构**（新增 `practice_candidates` 表）：

```sql
create table public.practice_candidates (
  id serial primary key,
  title text not null,
  summary text,
  content text,              -- 原文内容（用于 AI 分析）
  channel text not null,
  source_url text not null unique,
  author_name text,
  
  -- AI 评分
  ai_score decimal(3,1),
  ai_reason text,
  ai_suggested_skill_ids int[],
  
  -- 状态
  status text default 'pending',  -- pending / approved / rejected
  reviewed_at timestamp,
  reviewed_by text,
  
  -- 元数据
  crawled_at timestamp default now(),
  created_at timestamp default now()
);
```

**Telegram Bot 审核流程**：

1. 定时任务（每小时）检查候选池
2. 有新候选时，推送到骁哥 Telegram：
   ```
   📝 新实践案例待审核
   
   标题：{title}
   来源：{channel} | {author_name}
   AI 评分：{ai_score}/10
   推荐理由：{ai_reason}
   
   [✅ 收录] [❌ 拒绝] [🔗 查看原文]
   ```
3. 骁哥点击按钮：
   - ✅ 收录：自动入库到 `practices` 表
   - ❌ 拒绝：标记 rejected，不再推送
   - 🔗 查看原文：跳转 source_url

---

## 4. 实现计划

### Phase 1：MVP（1 周）

目标：跑通最小闭环

| 任务 | 预估 | 产出 |
|------|------|------|
| 候选池表结构 | 0.5d | SQL migration |
| RSS 订阅配置（5 个核心公众号） | 0.5d | 订阅列表 |
| AI 筛选脚本 | 1d | Node.js 脚本 |
| Telegram Bot 审核 | 1d | Bot 交互 |
| 入库逻辑 | 0.5d | API |
| 联调测试 | 0.5d | - |

### Phase 2：优化（2 周）

- 扩展 RSS 订阅源（20+ 公众号）
- 用户提交入口（网页表单）
- AI 自动关联 Skill
- 审核数据统计

### Phase 3：扩展（后续）

- 接入更多内容源（掘金、V2EX）
- 自动去重（相似内容检测）
- 内容质量反馈闭环

---

## 5. 风险与应对

| 风险 | 影响 | 应对 |
|------|------|------|
| RSS 服务不稳定 | 内容断供 | 多源备份 + 人工提交兜底 |
| AI 评分不准 | 垃圾进候选池 | 人工审核把关 + 持续调优 Prompt |
| 公众号内容抓取受限 | 无法获取正文 | 只抓标题摘要，人工补充 |

---

## 6. 待确认问题

1. **RSS 服务选型**：WeRSS / 今日热榜 / 自建？需要骁哥确认预算和偏好
2. **核心公众号列表**：哪些公众号是必须监控的？需要骁哥提供
3. **Skill 关联规则**：AI 建议的 Skill 如何映射到现有 skills 表？

---

## 7. 下一步

1. 骁哥确认方案方向
2. 提供核心公众号列表
3. 确认 RSS 服务选型
4. 开始 Phase 1 开发

---

*方案版本：v0.1 | 待评审*
